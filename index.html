<!DOCTYPE html>

<html>

	<head>

		<meta charset="utf-8">
		<title>SITY Challenge</title>

		<!--Bootstrap CSS-->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		
		<!--<link href="./style.css" type="text/css" rel="stylesheet">-->
		<style>

			html, body {
				z-index: 0;
				opacity: 0.9;
				transition: 1s opacity;
				height: 100vh;
				width: 100vw;
				min-height: 480px;
				background-color: aqua;
				background-image: linear-gradient(to bottom right, blue, aqua);
				margin: 0;
				color: black;
				font-family: "Segoe UI", Helvetica, sans-serif;
			}

			/* opacity fade out into main page */
			body.fade-in{
				opacity: 0.5;
				transition: 1s opacity;
			}

			body.fade-out{
				opacity: 1;
				transition: 1s opacity;
			}

			/* destination question fade in upon page opening*/
			#destination.fade-in{
				opacity: 1;
				transition: 1s opacity;
			}

			/* destination question fade out once user enters input */
			#destination.fade-out{
				opacity: 0;
				transition: 1s opacity;
			}

			/* 'final destination' fade out into main page*/
			#destination{
				position: fixed;
				display: flex;
				flex-direction: column;
				text-align: center;
				z-index: 100;
				opacity: 1;
				transition: 1s opacity;
				width: 80vw;
				height: 100vh;
				color: white;
				margin-left: 10vw;
				margin-top: 35vh;
			}

			/* additional question formatting*/
			#destinationQuestion{
				color: white;
				font-size: 10vh;
			}



			/* page header */
			header {
				z-index: 10;
				position: fixed;
				text-align: center;
				top: 0;
				height: 80px;
				width: 100vw;
				background-color: blue;
				background-image: linear-gradient(to bottom right, black, blue);
			}

			/* header icon */
			#mapIcon{
				float: left;
				width: 78px;
				height: 78px;
			}

			/* page title */
			#pageTitle.fade-out{
				opacity: 0;
			}

			/* page title */
			#pageTitle{
				opacity: 1;
				transition: 1s opacity;
				color: white;
				padding-top: 0.3em;
			}

			/* div with Google Maps */
			#map {
				z-index: 1;
				float:left;
				margin-top: 80px;
				margin-bottom: 20px;
       			height: calc(100vh - 100px);
       			width: 100vw;
      		}

      		/* page footer */
			footer{
				z-index: 10;
				position: fixed;
				background-color: black;
				background-image: linear-gradient(to bottom right, black, #222);
				width: 100vw;
				height: 20px;
				bottom: 0;
			}

			/* page footer text */
			#footNote{
				margin: 0;
				font-size: 0.9em;
				color: white;
				text-align: center;
			}

		</style>

	</head>

	<body>

		<!--JQuery-->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

		<!--Page Intro, with fades in (for dest. input) and fade out (towards the map)-->
		<script>
			setTimeout(function(){
    			document.body.className += ' fade-in';
				document.body.className += ' fade-in';
			},1000);
		</script>
		<script>
			$(function() {
				$('#destinationInput').click( function(){
					$('#destination').removeClass('fade-in');
					$('body').removeClass('fade-in');
					$('#pageTitle').addClass('fade-out');
					$('#destination').addClass('fade-out');
					$('body').addClass('fade-out');
				});
			});
		</script>

		<!--Page Header-->
		<header>
			<img id="mapIcon" src="map.png"/>
			<h1 id="pageTitle">SITY Challenge<h1>
		</header>

		<!--div for Google Maps-->
		<div id="map"></div>

		<!--div for destination input-->
		<div id="destination">
			<p id="destinationQuestion">Para onde vamos?</p>
			<input type="text" value="Vou para..." id="address">
			<input type="submit" value="Vamos!" id="destinationInput">
		</div>

		<!--script for the Google Maps app-->
		<script type="text/javascript">
			var map, infoWindow;
		      function initMap() {
		        map = new google.maps.Map(document.getElementById('map'), {
		          center: {lat: -34.397, lng: 150.644},
		          zoom: 14
		        });
		        infoWindow = new google.maps.InfoWindow;

		        // Try HTML5 geolocation.
		        if (navigator.geolocation) {
		          navigator.geolocation.getCurrentPosition(function(position) {
		            var pos = {
		              lat: position.coords.latitude,
		              lng: position.coords.longitude
		            };

		            infoWindow.setPosition(pos);
		            infoWindow.setContent('Location found.');
		            infoWindow.open(map);
		            map.setCenter(pos);
		          }, function() {
		            handleLocationError(true, infoWindow, map.getCenter());
		          });
		        } else {
		          // Browser doesn't support Geolocation
		          handleLocationError(false, infoWindow, map.getCenter());
		        }
		      }

		      function handleLocationError(browserHasGeolocation, infoWindow, pos) {
		        infoWindow.setPosition(pos);
		        infoWindow.setContent(browserHasGeolocation ?
		                              'Error: The Geolocation service failed.' :
		                              'Error: Your browser doesn\'t support geolocation.');
		        infoWindow.open(map);
		      }
		</script>

		<!--script to summon Google Maps-->
		<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAxfcO1YshS2zReHmTd_tud547lXxnprf4&callback=initMap">
    	</script>

    	<!--Page Footer-->
		<footer>
			<p id="footNote">Project by Ivo de Andrade de Deus. Map Icon by The Noun Project.</p>
		</footer>

	</body>

<html>